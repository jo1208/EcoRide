{% extends 'base.html.twig' %}

{% block title %}D√©tail du covoiturage
{% endblock %}

{% block body %}
	<main class="container py-5" style="max-width: 900px;">
		<div class="bg-white p-4 rounded shadow-sm border">
			<h2 class="mb-4 text-success text-center">D√©tail du covoiturage</h2>

			<!-- Infos Covoiturage -->
			<div class="mb-4">
				<h4 class="text-success">Trajet</h4>
				<p>
					<strong>D√©part :</strong>
					{{ covoiturage.lieuDepart }}
					√†
					{{ covoiturage.heureDepart|date('H:i') }}
					le
					{{ covoiturage.dateDepart|date('d/m/Y') }}</p>
				<p>
					<strong>Arriv√©e :</strong>
					{{ covoiturage.lieuArrivee }}
					√†
					{{ covoiturage.heureArrivee|date('H:i') }}
					le
					{{ covoiturage.dateArrivee|date('d/m/Y') }}</p>
				<p>
					<strong>Prix par personne :</strong>
					{{ covoiturage.prixPersonne|number_format(2, ',', '.') }}
					‚Ç¨</p>
				<p>
					<strong>Places restantes :</strong>
					{{ covoiturage.nbPlace > 0 ? covoiturage.nbPlace : 'Complet üö´' }}</p>
			</div>

			<!-- Infos Voiture -->
			{% if voiture %}
				<div class="mb-4">
					<h4 class="text-success">V√©hicule</h4>
					<p>
						<strong>Mod√®le :</strong>
						{{ voiture.modele }}</p>
					<p>
						<strong>Marque :</strong>
						{{ voiture.marque ?? 'Non pr√©cis√©e' }}</p>
                    <p>
                        <strong>√âlectrique :</strong>
                        {{ voiture.ecologique ? 'Oui ‚ö°' : 'Non' }}</p>
					<p>
						<strong>Couleur :</strong>
						{{ voiture.couleur }}</p>
				</div>
			{% endif %}

			<!-- Infos Conducteur -->
			<div class="mb-4">
				<h4 class="text-success">Conducteur</h4>
				<p>
					<strong>Pseudo :</strong>
					{{ conducteur.pseudo }}</p>
				<p>
					<strong>Note moyenne :</strong>
					{{ conducteur.note ?? 'Non not√©' }}/5</p>
			</div>

			<!-- Pr√©f√©rences -->
			{% if preference %}
				<div class="mb-4">
					<h4 class="text-success">Pr√©f√©rences du conducteur</h4>
					<ul>
						<li>Fumeur :
							{{ preference.fumeur ? 'Oui' : 'Non' }}</li>
						<li>Animaux :
							{{ preference.animal ? 'Accept√©s' : 'Non accept√©s' }}</li>
						<li>Musique :
							{{ preference.musique ? 'Oui' : 'Non' }}</li>
						{% if preference.autres %}
							<li>Autres :
								{{ preference.autres }}</li>
						{% endif %}
					</ul>
				</div>
			{% endif %}

			<!-- Avis -->
			{% if avis is not empty %}
				<div class="mb-4">
					<h4 class="text-success">Avis re√ßus</h4>
					<ul class="list-group">
						{% for a in avis %}
							<li class="list-group-item">
								‚≠ê
								{{ a.note }}/5 -
								<em>{{ a.commentaire }}</em>
							</li>
						{% endfor %}
					</ul>
				</div>
			{% else %}
				<p class="text-muted">Aucun avis pour ce conducteur.</p>
			{% endif %}

			<!-- Bouton Participer -->
			{% if covoiturage.nbPlace > 0 %}
				<div class="text-center mt-4">
                <form method="post" action="{{ path('app_participer_covoiturage', { id: covoiturage.id }) }}" onsubmit="return confirm('Participer √† ce trajet va d√©duire {{ covoiturage.prixPersonne|number_format(2, ',', '.') }} cr√©dits. Confirmez-vous ?')">
                    <button class="btn btn-success btn-sm mt-2" {% if covoiturage.nbPlace == 0 %} disabled {% endif %}>
                        Participer
                    </button>
                </form>









				</div>
			{% endif %}
		</div>
	</main>
{% endblock %}

